
データベースの作成方法      2017.2.24

 ◆ レシピ：

  jrdb.xlsx              データベース作成元データの元データマスター
　　                     すべてのデータベースの元ネタ

 ◆ ターゲット：

　jrdb2014.db            Sqlite3 データベース
　jrdb2015.db            
　jrdb2017.db            
　jrdb2018.db            
　jrdb2014.db.enc        Sqlite3 データベースを暗号化したもの
　jrdb2015.db.enc        
　jrdb2017.db.enc        
　jrdb2018.db.enc        

  最新は2018、その他は旧データベース（いつか統合したい）
  .encは暗号化したもので、Windows(MFC)版ではこれを使用で、リソースディレクトリ
  ../app/win_mfc/fjr_mfc/alps_mfc/res/ へ 配置される(mkdball.batでおこなう)
  *.db は、iOS版は,  ../app/Farert/Farert へ 配置される(mkdball.batでおこなう)

 ◆ ツール：
  jr_db_reg.jse          Excelシート(jdrb.xlsx)からテキストファイル(jrdb2016.txt, jrdb2014.txt, jrdb2015.txt)
　　　　　　　　         を作成する
  mkdball.bat            データベース作成スクリプト(jrdb.txtからjr.dbを生成・作成する)
  mkdb.bat　　　　　　　 mkfnsll.batから呼ばれる

scripts\jr_db_reg.py	mkdb.batから呼ばれる
　　　　　　　　　　　　データベース操作関連スクリプトやテストコードなどを格納
                            実行するときは、現ディレクトリをカレントとして、
                            > python scripts\xxx.py
                        として実行する。（scripts\内をカレントとして実行してもDBが読み込めないので実行失敗する)

 ◆ 作成方法

     1) jrdb.xlsx を編集＆保存＆閉じる

     2) エクスプローラ上で、jr_db_reg.jse へ jrdb.xlsx をD&Dする
        または、
        jr_db_reg.se jrdb.xlsx
        をコマンドプロンプトで実行する

     3) mkdball.bat を実行する（エクスプローラ上で可：引数なし）

        以上で完了

      iOS版はそのままコピーされてビルドすれば使えるが、
      Android版はZIP化しなければならないため(DOSバッチファイルでは面倒)、MACコマンドプロンプト側で
      mkdb-android.sh を実行する


ｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰｰ
2013-8-17
ddm\			データベース作成スクリプトだが、使用することはない。
			データベースの作成は、How-To-Makeing-db.txt を参照。mkdb.batで作成する。
faretbl.xlsx	運賃計算テーブル作成、ロジック作成のもととなるデータで、設計参考資料
How-To-Makeing-db.txt	(このファイル)データベース作成手順書(実際にはmkdb.batを読むべし)
jr.db			データベースファイル
jrdb.txt		データベース作成元データ

misc\			昔のファイル(もう使わないと思う)
node_list.txt	データベース作成スクリプトが作成した中間ファイル(使用することはない)

2013-7-25
	mkdb.bat を実行するだけで良しとする


2012-6-9

 jr.db

 作成方法
 　1) Excel(JRDB.XLS)を編集
 　  各シートをコピーして、任意の新規作成テキストファイル(JRDB.TXT)へ貼り付ける
      (lines, clinfar, rule69, rule70, rule86, fare)
      -> jr_db_reg.jse にjrdb.xls を渡して実行できる.

   2) python jr_db_reg.py
   3) python node_list.py


   jrdb.db -+- jr_db_reg.py
          +- node_list.py     ※ jrdb.pyはjr_db_reg.py, node_list.py などから使用されます.


  以上で完成

  alps_mfcに組み込む場合、
  リソースディレクトリにcrypt_tofish.exe enc jr.db で作成されたjr.db.encを
  prj/res/　へ配置





オープンソース化する

経路探索、交通系以外のシステムの用途では利用可能とする？
→あいまいだからダメ

GPLが望ましい
