
#include "stdafx.h"


#if defined _DEBUG

FILE *os;
Route route;

static tstring num_str_yen(int num)
{
	TCHAR cb[16];
	tstring s;
	int ll;
	
	_sntprintf_s(cb, 16, _T("%u"), num);
	s = cb;
	for (ll = s.size() - 3; 0 < ll; ll -= 3) {
		s.insert(ll, _T(","));
	}
	return s;
}

static tstring cr_remove(tstring s)
{
	tstring::size_type idx = 0;
	while (tstring::npos != (idx = s.find(_T('\r'), idx))) {
		s.replace(idx, 1, _T(" "), 1, 1);
	}
	return s;
}

/////////////////////////////////////////////////////////////////////////////////////

static void test_route(void)
{
	TCHAR *route_def[] = {
_T("c69ğ‚ÌŒo˜H////////////////////////////////////////"),
/* 01 */	 _T("‰¡•l,“ŒŠC“¹ü,“Œ‹,‹—tü,‘h‰ä,ŠO–[ü,‘å–Ô,“Œ‹àü,¬“Œ,‘•ü,²‘q,¬“cü,¬“c,¬“cü(¬“c-‰ä‘·q),‰ä‘·q,í”Öü,ŠâÀ"),
/* 02 */	 _T("‰¡•l,“ŒŠC“¹ü,“Œ‹,‹—tü,‘h‰ä"),
/* 03 */	 _T("‰¡•l,“ŒŠC“¹ü,“Œ‹,‹—tü,‘h‰ä,ŠO–[ü, ç—t, ‘•ü, ²‘q, ¬“cü, ¬“c"),
/* 04 */	 _T("‰¡•l,“ŒŠC“¹ü,“Œ‹,‹—tü,‘h‰ä,ŠO–[ü, ç—t, ‘•ü, ‘D‹´"),
/* 05 */	 _T("‘åã,“ŒŠC“¹ü,–¼ŒÃ‰®"),
/* 06 */	 _T("”ŸŠÙ, ”ŸŠÙü, ‘åÀ, ”ŸŠÙü(»Œ´ü), X, ”ŸŠÙü, ˆ®ì, •x—Ç–ìü, •x—Ç–ì"),
/* 07 */	 _T("–Ô‘–, Î–kü, Vˆ®ì, @’Jü, ˆ®ì, ”ŸŠÙü, X, ”ŸŠÙü(»Œ´ü), ‘åÀ, ”ŸŠÙü, ŒÜ—ÅŠs"),
/* 08 */	 _T("‰F“s‹{,“Œ–kü,‘å‹{,“Œ–kü(é‹ü),Ô‰H,“Œ–kü(”ö‹vŒo—R),“ú•é—¢,í”Öü,…ŒË,…ŒSü,‰º›’J"),
/* 09 */	 _T("‰F“s‹{,“Œ–kü,‘å‹{,“Œ–kü(é‹ü),Ô‰H,“Œ–kü(”ö‹vŒo—R),“ú•é—¢,“Œ–kü,“Œ‹,‹—tü,‘h‰ä,ŠO–[ü,–ÎŒ´"),
/* 10 */	 _T("‰F“s‹{,“Œ–kü,‘å‹{,“Œ–kü(é‹ü),•‘ ‰Y˜a,•‘ –ìü,V¼ŒË,í”Öü,‘o—t"),
/* 11 */	 _T("‰F“s‹{,“Œ–kü,‘å‹{,“Œ–kü(é‹ü),•‘ ‰Y˜a,•‘ –ìü,•{’†–{’¬,“ì•ü,ìè"),
/* 12 */	 _T("‰F“s‹{,“Œ–kü,‘å‹{,“Œ–kü(é‹ü),Ô‰H,“Œ–kü,“ì‰Y˜a,•‘ –ìü,•‘ ‰Y˜a"),
/* 13 */	 _T("ã–ì,“Œ–kü,Ô‰H,“Œ–kü(é‹ü),‘å‹{,ì‰zü,‚—íì,”ª‚ü,”q“‡"),
/* 14 */	 _T("ã–ì,“Œ–kü,Ô‰H,“Œ–kü(é‹ü),‘å‹{,“Œ–kü,–kã,–kãü,‚Ù‚Á‚Æ‚ä‚¾"),
/* 15 */	 _T("“Œ‹,“ŒŠC“¹ü,•iì,“ŒŠC“¹ü(¼‘åˆäŒo—R),’ßŒ©,“ŒŠC“¹ü,‰¡•l"),
/* 16 */	 _T("“Œ‹,‹—tü,‘h‰ä,ŠO–[ü,Ÿ‰Y"),
/* 17 */	 _T("‘åã,“ŒŠC“¹ü,•ÄŒ´,–k—¤ü,•Ÿˆä"),
/* 18 */	 _T("”ö“¹,R—zü,OŒ´,Œàü,ŠC“cs,R—zü,L“‡"),
/* 19 */	 _T("L“‡,R—zü,VRŒû"),
/* 20 */	 _T("_ŒË,R—zü,OŒ´,Œàü,ŠC“cs,R—zü,‰ºŠÖ"),
/* 21 */	 _T("OŒ´,Œàü,ŠC“cs,R—zü,‰ºŠÖ"),
/* 22 */	 _T("OŒ´,Œàü,ŠC“cs"),
/* 23 */	 _T("_ŒË,R—zü,OŒ´,Œàü,ŠC“cs"),
/* 24 */	 _T("‰ºŠÖ,R—zü,_ŒË"),
/* 25 */	 _T("‹ùƒ–•l,R—zü,_ŒË"),
/* 26 */	 _T("‰ºŠÖ,R—zü,‹ùƒ–•l"),
/* 27 */	 _T("‹ùƒ–•l,R—zü,Šâ‘"),
/* 28 */	 _T("‰ºŠÖ,R—zü,Šâ‘"),
/* 29 */	 _T("_ŒË,R—zü,‰ºŠÖ"),
/* 30 */	 _T("‘h‰ä,‹—tü,“Œ‹"),
/* 31 */	 _T("Ÿ‰Y,ŠO–[ü,‘h‰ä,‹—tü,“Œ‹"),
/* 32 */	 _T("“Œ‹,‹—tü,‘h‰ä,ŠO–[ü,Ÿ‰Y"),
/* 33 */	 _T("“Œ‹,‹—tü,‘h‰ä,“à–[ü,‘³ƒ–‰Y"),
/* 34 */	 _T("“Œ‹,‹—tü,‘h‰ä"),
/* 35 */	 _T("“Œ‹,‘•ü,ç—t, ŠO–[ü,Ÿ‰Y"),
/* 36 */	 _T("Ÿ‰Y,ŠO–[ü,ç—t, ‘•ü,“Œ‹"),
/* 37 */	 _T("‹Ñ…’¬,‘•ü(‹Ñ…’¬-Œä’ƒƒm…),Œä’ƒƒm…,’†‰›“Œü, “Œ‹, ‹—tü, ‘h‰ä, ŠO–[ü,Ÿ‰Y"),
/* 38 */	 _T("—¼‘,‘•ü(‹Ñ…’¬-Œä’ƒƒm…),Œä’ƒƒm…,’†‰›“Œü, “Œ‹, ‹—tü, ‘h‰ä, ŠO–[ü,Ÿ‰Y"),
/* 39 */	 _T("ìè,“ŒŠC“¹ü,“Œ‹,‹—tü,‘h‰ä"),
/* 40 */	 _T("‘åã,“ŒŠC“¹ü,•ÄŒ´,–k—¤ü,’¼]’Ã"),
/* 41 */	 _T("R‰È,“ŒŠC“¹ü,•ÄŒ´,–k—¤ü,’¼]’Ã"),
/* 42 */	 _T("R‰È,“ŒŠC“¹ü,•ÄŒ´,–k—¤ü,‹ß]‰–’Ã"),		// NG
/* 43 */	 _T("‘åã,“ŒŠC“¹ü,•ÄŒ´,–k—¤ü,‹ß]‰–’Ã"),
/* 44 */	 _T("‘åã,“ŒŠC“¹ü,–¼ŒÃ‰®"),
/* 45 */	 _T("–¼ŒÃ‰®,“ŒŠC“¹ü,‘åã"),
/* 46 */	 _T("–¼ŒÃ‰®,“ŒŠC“¹ü,•ÄŒ´,–k—¤ü,•Ÿˆä"),
/* 47 */	 _T("–¼ŒÃ‰®,“ŒŠC“¹ü,•ÄŒ´"),
/* 48 */	 _T("“Ö‰ê,–k—¤ü,•ÄŒ´,“ŒŠC“¹ü,–¼ŒÃ‰®"),
/* 49 */	 _T("’¼]’Ã,–k—¤ü,•ÄŒ´,“ŒŠC“¹ü,‘åã"),
/* 50 */	 _T("’¼]’Ã,–k—¤ü,‹ß]‰–’Ã,ŒÎ¼ü, R‰È, “ŒŠC“¹ü,‘åã"),
/* 51 */	 _T("‘åã,“ŒŠC“¹ü, R‰È, ŒÎ¼ü, ‹ß]‰–’Ã, –k—¤ü, ’¼]’Ã"),
/* 52 */	 _T("‹ß]‰–’Ã,ŒÎ¼ü, R‰È"),
/* 53 */	 _T("R‰È, ŒÎ¼ü, ‹ß]‰–’Ã"),
/* 54 */	 _T("’¼]’Ã,–k—¤ü,‹ß]‰–’Ã,ŒÎ¼ü, R‰È"),
/* 55 */	 _T("‹ß]‰–’Ã,ŒÎ¼ü, R‰È, “ŒŠC“¹ü,‘åã"),
/* 56 */	 _T("R‰È, ŒÎ¼ü, ‹ß]‰–’Ã, –k—¤ü, ’¼]’Ã"),
/* 57 */	 _T("‘åã,“ŒŠC“¹ü, R‰È, ŒÎ¼ü, ‹ß]‰–’Ã"),
/* 58 */	 _T("‹ß]‰–’Ã,–k—¤ü,•ÄŒ´,“ŒŠC“¹ü,‘åã"),
/* 59 */	 _T("‹ß]‰–’Ã,–k—¤ü,•ÄŒ´"),
/* 60 */	 _T("‹ß]‰–’Ã,ŒÎ¼ü,R‰È,“ŒŠC“¹ü,•ÄŒ´"),
/* 61 */	 _T("•Ÿˆä,–k—¤ü,•ÄŒ´"),
/* 62 */	 _T("•ÄŒ´,–k—¤ü,•Ÿˆä"),
/* 63 */	 _T("‹ß]‰–’Ã,–k—¤ü,•ÄŒ´,“ŒŠC“¹ü,R‰È"),		// NG
/* 64 */	 _T("’¼]’Ã,–k—¤ü,•ÄŒ´,“ŒŠC“¹ü,R‰È"),
/* 65 */	 _T("‰ºŠÖ,R—zü,Šâ‘,Šâ“¿ü,ŸŠÔ"),
/* 66 */	 _T("”ö“¹,R—zü,‹ùƒ–•l,Šâ“¿ü,ŸŠÔ"),
/* 67 */_T("c86ğ‚ÌŒo˜H////////////////////////////////////////"),
/* 68 */	_T("‘å‚,“ŒŠC“¹ü,‘åã,‘åãŠÂóü,“V‰¤›,ã˜aü,™–{’¬"),
/* 69 */    _T("•úo,‚¨‚¨‚³‚©“Œü,‹v•ó›,ŠÖ¼ü,‰¤›,˜a‰ÌRü,˜a‰ÌR,‹I¨ü,‹TR,ŠÖ¼ü,–¼ŒÃ‰®,“ŒŠC“¹ü,‹àR(’†)"),
/* 70 */	_T("‹àR(’†),“ŒŠC“¹ü,–¼ŒÃ‰®,ŠÖ¼ü,‹TR,‹I¨ü,˜a‰ÌR,˜a‰ÌRü,‰¤›,ŠÖ¼ü,‹v•ó›,‚¨‚¨‚³‚©“Œü,•úo"),
/* 71 */	_T("’†–ì,’†‰›“Œü,‰–K,’†‰›¼ü,‹àR(’†),“ŒŠC“¹ü,–¼ŒÃ‰®"),
/* 72 */	_T("‚”ö,’†‰›“Œü,‰–K,’†‰›¼ü,‹àR(’†),“ŒŠC“¹ü,–¼ŒÃ‰®"),
/* 73 */	_T("•iì,Rèü,‘ãX–Ø,’†‰›“Œü,‰–K,’†‰›¼ü,‹àR(’†),“ŒŠC“¹ü,–¼ŒÃ‰®"),
/* 74 */	_T("Š—“c,“ŒŠC“¹ü,•iì,Rèü,‘ãX–Ø,’†‰›“Œü,‰–K,’†‰›¼ü,‹àR(’†),“ŒŠC“¹ü,–¼ŒÃ‰®"),
/* 75 */	_T("’†–ì,’†‰›“Œü,‰–K,’†‰›¼ü,‹àR(’†)"),
/* 76 */	_T("‚”ö,’†‰›“Œü,‰–K,’†‰›¼ü,‹àR(’†)"),
/* 77 */	_T("•iì,Rèü,‘ãX–Ø,’†‰›“Œü,‰–K,’†‰›¼ü,‹àR(’†)"),
/* 78 */	_T("Š—“c,“ŒŠC“¹ü,•iì,Rèü,‘ãX–Ø,’†‰›“Œü,‰–K,’†‰›¼ü,‹àR(’†)"),
/* 79 */	_T("Š—“c,“ŒŠC“¹ü,•iì,Rèü,‘ãX–Ø,’†‰›“Œü,Œä’ƒƒm…,‘•ü(‹Ñ…’¬-Œä’ƒƒm…),H—tŒ´,“Œ–kü,“c’[,Rèü,’r‘Ü,Ô‰Hü(é‹ü),Ô‰H,“Œ–kü(é‹ü),‘å‹{,‚èü,‚è,ã‰zü,‹{“à,M‰zü(Âƒmˆä-VŠƒ),V’Ã,‰H‰zü,H“c"),
/* 80 */	_T("H“c,‰H‰zü,V’Ã,M‰zü(Âƒmˆä-VŠƒ),‹{“à,ã‰zü,‚è,‚èü,‘å‹{,“Œ–kü(é‹ü),Ô‰H,Ô‰Hü(é‹ü),’r‘Ü,Rèü,“c’[,“Œ–kü,H—tŒ´,‘•ü(‹Ñ…’¬-Œä’ƒƒm…),Œä’ƒƒm…,’†‰›“Œü,‘ãX–Ø,Rèü,•iì,“ŒŠC“¹ü,Š—“c"),
/* 81 */	_T("Š—“c,“ŒŠC“¹ü,•iì,Rèü,‘ãX–Ø,’†‰›“Œü,Œä’ƒƒm…,‘•ü(‹Ñ…’¬-Œä’ƒƒm…),H—tŒ´,“Œ–kü,·‰ª"),
/* 82 */	_T("·‰ª,“Œ–kü,H—tŒ´,‘•ü(‹Ñ…’¬-Œä’ƒƒm…),Œä’ƒƒm…,’†‰›“Œü,‘ãX–Ø,Rèü,•iì,“ŒŠC“¹ü,Š—“c"),
/* 83 */	_T("Š—“c,“ŒŠC“¹ü,“Œ‹,“Œ–kü,·‰ª"),
/* 84 */	_T("Ô‰H,“Œ–kü,·‰ª"),
/* 85 */	_T("Ô‰H,“Œ–kü(é‹ü),‘å‹{,“Œ–kü,·‰ª"),
/* 86 */	_T("Š—“c,“ŒŠC“¹ü,“Œ‹,’†‰›“Œü,¼‘•ª›,•‘ –ìü,•‘ ‰Y˜a,“Œ–kü(é‹ü),‘å‹{,“Œ–kü,·‰ª"),
/* 87 */	_T("•‚ŠÔM“n,“Œ–kü(é‹ü),Ô‰H,Ô‰Hü(é‹ü),’r‘Ü,Rèü,Vh,’†‰›“Œü,‰–K,Âƒmˆäü,¼–{"),
/* 88 */	_T("•‚ŠÔM“n,“Œ–kü(é‹ü),‘å‹{,“Œ–kü,·‰ª"),
/* 89 */	_T("·‰ª,“Œ–kü,‘å‹{,“Œ–kü(é‹ü),•‚ŠÔM“n"),
/* 90 */	_T("•‚ŠÔM“n,“Œ–kü(é‹ü),Ô‰H,“Œ–kü,·‰ª"),
/* 91 */	_T("•‚ŠÔM“n,“Œ–kü(é‹ü),•‘ ‰Y˜a,•‘ –ìü,“ì‰Y˜a,“Œ–kü,·‰ª"),
/* 92 */	_T("•‚ŠÔM“n,“Œ–kü(é‹ü),•‘ ‰Y˜a,•‘ –ìü,V¼ŒË,í”Öü,ŠâÀ,“Œ–kü,·‰ª"),
/* 93 */	_T("”Â‹´,Ô‰Hü(é‹ü),Ô‰H,“Œ–kü(”ö‹vŒo—R),“ú•é—¢,“Œ–kü,“Œ‹,“ŒŠC“¹VŠ²ü,–¼ŒÃ‰®"),
/* 94 */	_T("”Â‹´,Ô‰Hü(é‹ü),Ô‰H,“Œ–kü(”ö‹vŒo—R),“ú•é—¢,“Œ–kü,H—tŒ´,‘•ü(‹Ñ…’¬-Œä’ƒƒm…),Œä’ƒƒm…,’†‰›“Œü,‘ãX–Ø,Rèü,•iì,“ŒŠC“¹VŠ²ü,–¼ŒÃ‰®"),
/* 95 */	_T("Š—“c,“ŒŠC“¹ü,ìè,“ì•ü,—§ì,’†‰›“Œü,‰–K,Âƒmˆäü,¼–{"),
/* 96 */	_T("¼‘åˆä,“ŒŠC“¹ü(¼‘åˆäŒo—R),•‘ ¬™,“ì•ü,•{’†–{’¬,•‘ –ìü,V¼ŒË,í”Öü,ŠâÀ"),
/* 97 */	_T("‚ ‚¢‚Ì—¢Œö‰€,DÀü,ŒK‰€,”ŸŠÙü,ŒÜ—ÅŠs,]·ü,–ØŒÃ“à,ŠC‹¬ü,’†¬‘,’ÃŒyü,ÂX,‰œ‰Hü,VÂX,“Œ–kVŠ²ü, “Œ‹,‹—tü,sì‰–•l,‹—tü(sì‰–•l-¼‘D‹´),¼‘D‹´,‘•ü,‹Ñ…’¬"),
/* 98 */	_T("a’J,Rèü,‚“c”nê"),
/* 99 */	_T("¬”,¬ŠCü,ŠCK"),
/* 100 */	_T("V\’Ãì,DÀü,ŒK‰€,”ŸŠÙü,ŒÜ—ÅŠs,]·ü,–ØŒÃ“à,ŠC‹¬ü,’†¬‘,’ÃŒyü,ÂX,‰œ‰Hü,VÂX,“Œ–kVŠ²ü, “Œ‹,‹—tü,sì‰–•l,‹—tü(sì‰–•l-¼‘D‹´),¼‘D‹´,•‘ –ìü,“ì‰Y˜a"),
/* 101 */	_T("¼‰¬ŒE,’†‰›“Œü,Vh,Rèü,’r‘Ü,Ô‰Hü(é‹ü),Ô‰H,“Œ–kü,“Œ‹,‹—tü,Š‹¼—ÕŠCŒö‰€"),
/* 102 */	_T("‰¡•l,“ŒŠC“¹ü,“Œ‹,‹—tü,‘h‰ä,ŠO–[ü,‘å–Ô,“Œ‹àü,¬“Œ,‘•ü,²‘q,¬“cü,¬“c,¬“cü(¬“c-‰ä‘·q),‰ä‘·q,í”Öü,ŠâÀ"),
/* 103 */	_T("’·’Ã“c,‰¡•lü,V‰¡•l,“ŒŠC“¹VŠ²ü,–¼ŒÃ‰®"),
/* 104 */	_T("’·’Ã“c,‰¡•lü,V‰¡•l,“ŒŠC“¹VŠ²ü,V‘åã, R—zVŠ²ü, OŒ´"),
/* 105 */	_T("V‰¡•l,“ŒŠC“¹VŠ²ü,V‘åã, R—zVŠ²ü,OŒ´"),
/* 106 */	_T("•iì,Rèü,‘ãX–Ø,’†‰›“Œü,Œä’ƒƒm…,‘•ü(‹Ñ…’¬-Œä’ƒƒm…),H—tŒ´,“Œ–kü,“c’[,Rèü,’r‘Ü,Ô‰Hü(é‹ü),Ô‰H,“Œ–kü(é‹ü),‘å‹{,“Œ–kü,·‰ª"),
/* 107 */	_T("‚ ‚¢‚Ì—¢Œö‰€,DÀü,ŒK‰€,”ŸŠÙü,ŒÜ—ÅŠs,]·ü,–ØŒÃ“à,ŠC‹¬ü,’†¬‘,’ÃŒyü,ÂX,‰œ‰Hü,VÂX,“Œ–kVŠ²ü, “Œ‹"),
/* 108 */	_T("‚ ‚¢‚Ì—¢Œö‰€,DÀü,ŒK‰€,”ŸŠÙü,ŒÜ—ÅŠs,]·ü,–ØŒÃ“à,ŠC‹¬ü,’†¬‘,’ÃŒyü,ÂX,‰œ‰Hü,VÂX,“Œ–kVŠ²ü, “Œ‹,‹—tü,sì‰–•l,‹—tü(sì‰–•l-¼‘D‹´),¼‘D‹´,•‘ –ìü,“ì‰Y˜a"),
/* 109 */	_T("“Œ‰Y˜a,•‘ –ìü,¼‘D‹´,‹—tü(sì‰–•l-¼‘D‹´),sì‰–•l,‹—tü,“Œ‹,“Œ–kVŠ²ü,VÂX,‰œ‰Hü,ÂX,’ÃŒyü,’†¬‘,ŠC‹¬ü,–ØŒÃ“à,]·ü,ŒÜ—ÅŠs,”ŸŠÙü,ŒK‰€,DÀü,‚ ‚¢‚Ì—¢Œö‰€"),
/* 110 */	_T("‚ ‚¢‚Ì—¢Œö‰€,DÀü,ŒK‰€,”ŸŠÙü,ŒÜ—ÅŠs,]·ü,–ØŒÃ“à,ŠC‹¬ü,’†¬‘,’ÃŒyü,ÂX,‰œ‰Hü,VÂX,“Œ–kVŠ²ü, “Œ‹,‹—tü,sì‰–•l,‹—tü(sì‰–•l-¼‘D‹´),¼‘D‹´,‘•ü,‹Ñ…’¬"),
/* 111 */	_T("‚ ‚¢‚Ì—¢Œö‰€,DÀü,ŒK‰€,”ŸŠÙü,’·–œ•”,º—–ü,Àƒm’[,çÎü,”’Î(”Ÿ),”ŸŠÙü,•c•ä"),
/* 112 */	_T("ŠCK,¬ŠCü,¬•£‘ò,’†‰›“Œü,”ª‰¤q,‰¡•lü,’·’Ã“c"),
/* 113 */	_T("‘å‚,“ŒŠC“¹ü,‘åã,‘åãŠÂóü,“V‰¤›,ã˜aü,™–{’¬"),
/* 114 */	_T("Š}›,“ŒŠC“¹ü,‘åã,‘åãŠÂóü,“V‰¤›,ã˜aü,™–{’¬"),
/* 115 */	_T("‘å‚,“ŒŠC“¹ü,‘åã"),
/* 116 */	_T("Š}›,“ŒŠC“¹ü,‘åã"),
/* 117 */	_T("“Œ—„ì,“ŒŠC“¹ü,‘å‚"),
/* 118 */	_T("“Œ—„ì,“ŒŠC“¹ü,Š}›"),
/* 119 */	_T("“Œ—„ì,“ŒŠC“¹ü,–¼ŒÃ‰®"),
/* 120 */	_T("™–{’¬,ã˜aü,“V‰¤›,‘åãŠÂóü,‘åã,“ŒŠC“¹ü,‘å‚"),
/* 121 */	_T("™–{’¬,ã˜aü,“V‰¤›,‘åãŠÂóü,‘åã,“ŒŠC“¹ü,Š}›"),
/* 122 */	_T("™–{’¬,ã˜aü,“V‰¤›,‘åãŠÂóü,‘åã,“ŒŠC“¹ü,–¼ŒÃ‰®"),
/* 123 */	_T("™–{’¬,ã˜aü,“V‰¤›,‘åãŠÂóü,‘åã,“ŒŠC“¹ü,ŒË’Ë"),
/* 124 */	_T("’·’Ã“c,‰¡•lü,“Œ_“Şì,“ŒŠC“¹ü,•xm,g‰„ü,‘•ê"),
/* 125 */	_T("‰¡•l,“ŒŠC“¹ü,•xm,g‰„ü,‘•ê"),
/* 126 */	_T("‰¡•l,“ŒŠC“¹ü,•xm,g‰„ü,“ìb•{"),
/* 127 */	_T("’·’Ã“c,‰¡•lü,“Œ_“Şì,“ŒŠC“¹ü,•xm,g‰„ü,“ìb•{"),
//	 _T(",,,,,,,,,"),
	_T(""),
	};
	TCHAR buffer[1024];
	LPTSTR psz_title = _T("");
	int i;
	int opt;
	int flag;

	for (i = 0; '\0' != *route_def[i]; i++) {
		route.removeAll();
		if (route_def[i][0] == _T('c')) {
			// ƒRƒƒ“ƒgƒ^ƒCƒgƒ‹‚Ì•\¦
			psz_title = route_def[i] + 1;
			continue;
		}
		_tcscpy_s<1024>(buffer, route_def[i]);
		_ftprintf(os, _T("!---<%02d>:%s -----------------\n<%s>\n"), i, psz_title, buffer);
		route.setup_route(buffer);

		tstring s = route.showFare(RULE_NO_APPLIED);
		s = cr_remove(s);
		_ftprintf(os, _T("///”ñ“K—p\n%s\n"), s.c_str());
		_ftprintf(os, _T("Œ‹‰Êƒ‹[ƒg(”ñ“K—p)--->\n"));
		_ftprintf(os, route.show_route(false).c_str());
		_ftprintf(os, _T("<---\n\n"));

		s = route.showFare(RULE_APPLIED);
		s = cr_remove(s);
		_ftprintf(os, _T("///“K—p\n%s\n"), s.c_str());
		_ftprintf(os, _T("Œ‹‰Êƒ‹[ƒg(“K—p)--->\n"));
		_ftprintf(os, route.show_route(true).c_str());
		_ftprintf(os, _T("<---\n\n"));

		opt = route.fareCalcOption();
		if (opt == 2) {
			s = route.showFare(RULE_APPLIED | APPLIED_START);
			s = cr_remove(s);
			_ftprintf(os, _T("///’…‰w=’P‰w\n%s\n"), s.c_str());
			_ftprintf(os, _T("Œ‹‰Êƒ‹[ƒg(“K—p)--->\n"));
			_ftprintf(os, route.show_route(true).c_str());
			_ftprintf(os, _T("<---\n\n"));

			opt = route.fareCalcOption();
			ASSERT(opt == 1);

			s = route.showFare(RULE_APPLIED);
			s = cr_remove(s);
			_ftprintf(os, _T("///”­‰w=’P‰w\n%s\n"), s.c_str());
			_ftprintf(os, _T("Œ‹‰Êƒ‹[ƒg(“K—p)--->\n"));
			_ftprintf(os, route.show_route(true).c_str());
			_ftprintf(os, _T("<---\n\n"));

			opt = route.fareCalcOption();
			ASSERT(opt == 2);
		} else {
			ASSERT(opt == 0);	/* opt=1‚Í‚ ‚è“¾‚È‚¢ */
		}
	}
}

/////////////////////////////////////////////////////////////////////////////////////
// VŠ²ü<->İ—ˆüæ‚èŠ·‚¦
//
void test_hzl(void)
{
	// route.add() ƒ`ƒFƒbƒN x‚Ì‚Â‚¢‚½‰w‚Ö’…AƒGƒ‰[‚Æ‚È‚é‚±‚Æ.

	TCHAR *route_def[] = {
    _T("“Œ‹, “ŒŠC“¹VŠ²ü, •iì, “ŒŠC“¹ü, xV‹´"),
    _T("“Œ‹, “ŒŠC“¹ü, •iì, “ŒŠC“¹VŠ²ü, x“Œ‹"),
    _T("V‹´, “ŒŠC“¹ü, •iì, “ŒŠC“¹VŠ²ü, x“Œ‹"),
    _T("“Œ‹, “ŒŠC“¹VŠ²ü, •iì, “ŒŠC“¹ü, o¬“cŒ´"),
    _T("“Œ‹, “ŒŠC“¹ü, •iì, “ŒŠC“¹VŠ²ü, o¬“cŒ´"),
    _T("“Œ‹,“ŒŠC“¹VŠ²ü,•l¼,“ŒŠC“¹ü,x“V—³ì"),
    _T("•ÄŒ´,“ŒŠC“¹VŠ²ü,•l¼,“ŒŠC“¹ü,o“V—³ì"),
    _T("“Œ‹,“ŒŠC“¹VŠ²ü,Ã‰ª,“ŒŠC“¹ü,o‘“ã"),
    _T("•ÄŒ´,“ŒŠC“¹VŠ²ü,Ã‰ª,“ŒŠC“¹ü,xÄ’Ã"),
    _T("–¼ŒÃ‰®,“ŒŠC“¹VŠ²ü,Ã‰ª,“ŒŠC“¹ü,o‘“ã"),
    _T("“V—³ì,“ŒŠC“¹ü,•l¼,“ŒŠC“¹VŠ²ü,x“Œ‹"),
    _T("Ä’Ã,“ŒŠC“¹ü,Ã‰ª,“ŒŠC“¹VŠ²ü,o“Œ‹"),
    _T("‘“ã,“ŒŠC“¹ü,Ã‰ª,“ŒŠC“¹VŠ²ü,o“Œ‹"),
    _T("Ä’Ã,“ŒŠC“¹ü,Ã‰ª,“ŒŠC“¹VŠ²ü,x•ÄŒ´"),
    _T("_ŒË,“ŒŠC“¹ü,V‘åã,“ŒŠC“¹VŠ²ü,o“Œ‹"),
    _T("”‘½,­™“‡ü,¬‘q,R—zVŠ²ü,oV‘åã"),
    _T("Šò•Œ,“ŒŠC“¹ü,–¼ŒÃ‰®,“ŒŠC“¹VŠ²ü,o•ÄŒ´"),
    _T("‘“ã,“ŒŠC“¹ü,Ã‰ª,“ŒŠC“¹VŠ²ü,o“Œ‹"),
    _T("•ÄŒ´,“ŒŠC“¹VŠ²ü,–¼ŒÃ‰®,“ŒŠC“¹ü,oŠò•Œ"),
    _T("“Œ‹,“ŒŠC“¹VŠ²ü,Ã‰ª,“ŒŠC“¹ü,o‘“ã"),
    _T(""),
    };
    
	TCHAR buffer[1024];
	int i;
	for (i = 0; '\0' != *route_def[i]; i++) {
		route.removeAll();
		_tcscpy_s<1024>(buffer, route_def[i]);


		TCHAR* p;
		int lineId = 0;
		int stationId1 = 0;
		int stationId2 = 0;
		TCHAR* ctx = NULL;
		bool fail;
		int rc;

		for (p = _tcstok_s(buffer, _T(", "), &ctx); p; p = _tcstok_s(NULL, _T(", "), &ctx)) {
			if (stationId1 == 0) {
				route.startStationId = stationId1 = Route::GetStationId(p);
				ASSERT(0 < stationId1);
			} else if (lineId == 0) {
				lineId = Route::GetLineId(p);
				ASSERT(0 < lineId);
			} else {
				bool cont = false;
				if ('x' == *p) {
					++p;
					fail = true;
				} else if ('o' == *p) {
					++p;
					fail = false;
				} else {
					cont = true;
				}
				stationId2 = Route::GetStationId(p);
				ASSERT(0 < stationId2);
				rc = route.add(lineId, stationId1, stationId2);
				if (cont && rc < 0) {
					_ftprintf(os, _T("VŠ²ü<->İ—ˆüæ‚èŠ·‚¦: Test Program Bug!!!!! %s(%s)\n"), p, route_def[i]);
				} else if (!cont) {
					if (fail) {
						ASSERT(rc == -1);
						_ftprintf(os, _T("VŠ²ü<->İ—ˆüæ‚èŠ·‚¦: Failure OK %s\n"), route_def[i]);
					} else {
						ASSERT(rc >= 0);
						_ftprintf(os, _T("VŠ²ü<->İ—ˆüæ‚èŠ·‚¦: Success OK %s\n"), route_def[i]);
					}
				}
				lineId = 0;
				stationId1 = stationId2;
			}
		}
		
	}
}


void test_autoroute(void)
{
	TCHAR *route_def[] = {
/* 00 */    _T("“Œ‹,“ŒŠC“¹VŠ²ü,Ã‰ª,“ŒŠC“¹ü,•l¼"), _T("–¼ŒÃ‰®"),
/* 01 */    _T("•xR"), _T("“V—³ì"),
/* 02 */    _T("“V—³ì"), _T("•xR"),
/* 03 */    _T("å‘ä"), _T("‘åX"),
/* 04 */    _T("ªº"), _T("­™“‡"),
/* 05 */    _T("’·è"), _T("’t“à"),
/* 06 */    _T("–Îs"), _T("’·–ì"),
/* 07 */    _T("–Îs"), _T("”MŠC"),
/* 08 */    _T("‹{ŒÃ"), _T("â’¬"),
/* 09 */    _T("â’¬"), _T("‹{ŒÃ"),
/* 10 */    _T("‘ãX–Ø"), _T("—p“y"),
/* 11 */    _T("“ñ–{¼,“Œ–kü,•Ÿ“‡(–k),‰œ‰Hü,‘å‹È,“c‘òŒÎü,·‰ª,“Œ–kü,¬‹“c"), _T("‹{ŒÃ"),
/* 12 */    _T("“ñ–{¼,“Œ–kü,•Ÿ“‡(–k),‰œ‰Hü,‘å‹È,“c‘òŒÎü,·‰ª,“Œ–kü,¬‹“c"), _T("â’¬"),
/* 13 */    _T("“ñ–{¼,“Œ–kü,•Ÿ“‡(–k),‰œ‰Hü,‰¡è,–kãü,–kã,“Œ–kü,¬‹“c"), _T("â’¬"),
/* 14 */    _T("“Œ‹,“ŒŠC“¹ü,‹àR(’†),’†‰›¼ü,‰–K,’†‰›“Œü,b•{,g‰„ü"), _T("Œä“aê"),
/* 15 */    _T("“Œ‹,“ŒŠC“¹ü,‹àR(’†),’†‰›¼ü,‰–K,’†‰›“Œü,b•{,g‰„ü"), _T("”Ÿ“ì"),
/* 16 */    _T("“Œ‹,“ŒŠC“¹ü,‹àR(’†),’†‰›¼ü,‰–K,’†‰›“Œü,b•{,g‰„ü"), _T("‘ì"),
/* 17 */    _T("“Œ‹,“ŒŠC“¹ü,‹àR(’†),’†‰›¼ü,‰–K,’†‰›“Œü,b•{,g‰„ü"), _T("‘“ã"),
/* 18 */    _T("“Œ‹,“ŒŠC“¹ü,‹àR(’†),’†‰›¼ü,‰–K,’†‰›“Œü,b•{,g‰„ü"), _T("Ä’Ã"),
/* 19 */    _T("“Œ‹,“ŒŠC“¹ü,‹àR(’†),’†‰›¼ü,‰–K,’†‰›“Œü,b•{,g‰„ü,•xm"), _T("Œä“aê"),
/* 20 */    _T("“Œ‹,“ŒŠC“¹ü,‹àR(’†),’†‰›¼ü,‰–K,’†‰›“Œü,b•{,g‰„ü,•xm"), _T("”Ÿ“ì"),
/* 21 */    _T("“Œ‹,“ŒŠC“¹ü,‹àR(’†),’†‰›¼ü,‰–K,’†‰›“Œü,b•{,g‰„ü,•xm"), _T("‘ì"),
/* 22 */    _T("“Œ‹,“ŒŠC“¹ü,‹àR(’†),’†‰›¼ü,‰–K,’†‰›“Œü,b•{,g‰„ü,•xm"), _T("‘“ã"),
/* 23 */    _T("“Œ‹,“ŒŠC“¹ü,‹àR(’†),’†‰›¼ü,‰–K,’†‰›“Œü,b•{,g‰„ü,•xm"), _T("Ä’Ã"),
/* 24 */    _T(""),
    };
	TCHAR buffer[1024];
	int i;
	for (i = 0; _T('\0') != *route_def[i]; i += 2) {
		_ftprintf(os, _T("!===<%02d>: auto route ==================\n\n"), i);
		route.removeAll();
		_tcscpy_s<1024>(buffer, route_def[i]);
		route.setup_route(buffer);
		route.endStationId = Route::GetStationId(route_def[i + 1]);
		_ftprintf(os, _T("* pre route >>>>>>>\n  {%s -> %s}\n"), route_def[i], route_def[i + 1]);

		_ftprintf(os, _T("* auto route(VŠ²ü–¢g—p) >>>>>>>\n"));
		if (! route.changeNeerest(true)) {
			_ftprintf(os, _T("Can't route.\n"));
		} else {
			tstring s = route.showFare(RULE_NO_APPLIED);
			s = cr_remove(s);
			_ftprintf(os, _T("///”ñ“K—p\n%s\n"), s.c_str());
			_ftprintf(os, _T("Œ‹‰Êƒ‹[ƒg(”ñ“K—p)--->\n"));
			_ftprintf(os, route.show_route(false).c_str());
			_ftprintf(os, _T("<---\n\n"));

			s = route.showFare(RULE_APPLIED);
			s = cr_remove(s);
			_ftprintf(os, _T("///“K—p\n%s\n"), s.c_str());
			_ftprintf(os, _T("Œ‹‰Êƒ‹[ƒg(“K—p)--->\n"));
			_ftprintf(os, route.show_route(true).c_str());
			_ftprintf(os, _T("<---\n\n"));
		}
		route.removeAll();
		_tcscpy_s<1024>(buffer, route_def[i]);
		route.setup_route(buffer);
		route.endStationId = Route::GetStationId(route_def[i + 1]);
		_ftprintf(os, _T("* auto route(VŠ²üg—p) >>>>>>>\n"));
		if (! route.changeNeerest(false)) {
			_ftprintf(os, _T("Can't route.\n"));
		} else {
			tstring s = route.showFare(RULE_NO_APPLIED);
			s = cr_remove(s);
			_ftprintf(os, _T("///”ñ“K—p\n%s\n"), s.c_str());
			_ftprintf(os, _T("Œ‹‰Êƒ‹[ƒg(”ñ“K—p)--->\n"));
			_ftprintf(os, route.show_route(false).c_str());
			_ftprintf(os, _T("<---\n\n"));

			s = route.showFare(RULE_APPLIED);
			s = cr_remove(s);
			_ftprintf(os, _T("///“K—p\n%s\n"), s.c_str());
			_ftprintf(os, _T("Œ‹‰Êƒ‹[ƒg(“K—p)--->\n"));
			_ftprintf(os, route.show_route(true).c_str());
			_ftprintf(os, _T("<---\n\n"));
		}
	}

}

/////////////////////////////////////////////////////////////////////////////////////

//	TEST Main
//	InitDlg‚©‚çŒÄ‚Î‚ê‚é
//
int test_exec(void)
{
	CTime t = CTime::GetCurrentTime();
	
	fopen_s(&os, "test_result.txt", "w");

	_ftprintf(os, _T("timestamp: %s\n"), t.Format("%y.%m.%d %H:%M"));
	
	_ftprintf(os, _T("\n#---hzl---------------------------------------------------------\n"));
	test_hzl();

	_ftprintf(os, _T("\n#===auto route==================================================\n"));
	test_autoroute();

	_ftprintf(os, _T("\n#---specificial route-------------------------------------------\n"));
	test_route();

	fclose(os);
	return 1;
}
#else
int test_exec(void)
{
	return 1;
}

#endif












